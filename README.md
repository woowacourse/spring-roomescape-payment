# 방탈출 사용자 예약

### 요구사항

- [x] 사용자 로그인
    - [x] 사용자는 이름, 이메일, 비밀번호로 인증한다.
    - [x] 이름은 `PlayerName`을 사용한다.
    - [x] 이메일은 형식을 지켜야 하며, 50자 이내여야 한다.
        - [x] 중복될 수 없다.
    - [x] 비밀번호는 암호화해 저장한다.

- [x] 요청에 대한 적절한 상태코드를 반환하도록 수정
    - 생성 시 201, 삭제 시 204

- [x] 시간에서 발생할 수 있는 예외 사항 처리
    - [x] 유효하지 않은 시작 시간
    - [x] 중복되는 시작 시간
    - [x] 초 단위 시간은 무시하도록 처리
    - [x] 없는 id를 삭제하는 경우
    - [x] 예약이 존재하는 시간을 삭제하는 경우

- [x] 예약에서 발생할 수 있는 예외 사항 처리
    - [x] 시간 id가 존재하지 않는 경우
    - [x] 이름 제약조건 (길이 등)
    - [x] 과거 시간을 예약하는 경우
    - [x] 같은 날짜에 같은 시간을 예약하는 경우 중복 예약

    - [x] 테마에서 발생할 수 있는 예외 사항 처리
        - [x] 예약이 존재하는 테마를 삭제하는 경우

- [x] 예약을 대기할 수 있다.
- [x] 동시에 예약하려는 경우, 나중에 예약한 사람은 예약되지 않는다 (대기로도 전환되지 않는다)
- [x] 같은 사람이 (날짜, 시간, 테마)가 같도록 여러 번 대기열에 등록할 수 없다.
- [x] 예약이 취소되면 대기 중인 예약이 자동으로 예약된다.
- [x] 예약 대기를 취소할 수 있다. 이때, 뒤쪽 예약 사람들의 순번이 줄어든다.
- [x] 사용자가 예약 조회를 할 때, 결제 정보와 함께 조회한다.
- [x] 대기 순번은 최대 5명까지이다.
- [x] 예약 대기를 조회할 수 있다.
- [x] 예약 대기에서 취소할 수 있다 (관리자)

- [x] 테마에는 정해진 가격이 있다.
- [x] 예약할 때, 결제가 정상처리되어야 예약이 완료된다.

# 방탈출 API 명세

[명세](http://localhost:63342/spring-roomescape-payment/spring-roomescape-payment.main/static/docs/index.html?_ijt=6c0rrkgr2a3hunv7a2lp50h6lj&_ij_reload=RELOAD_ON_SAVE)

# ERD

![erd.PNG](src%2Fmain%2Fresources%2Fstatic%2Fimage%2Ferd.PNG)
